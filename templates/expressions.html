{% extends "base.html" %}

{% block content %}

<div class="relative flex size-full min-h-screen flex-col bg-[#101a23] dark group/design-root overflow-x-hidden" style='font-family: Inter, "Noto Sans", sans-serif;'>
    <div class="layout-container flex h-full grow flex-col">
        <div class="px-0 flex flex-1 py-5 gap-4">
            <!-- עמודה שמאלית עם שירים ומילים -->
            <aside class="flex flex-row gap-2 p-4 rounded-xl shrink-0 border border-[#314f68]" style="width: 35%; max-height: calc(100vh - 50px); overflow-y: hidden;">
                <!-- רשימת השירים -->
                <div class="flex-[1] overflow-hidden rounded-xl p-4 flex flex-col" style="max-height: 100%; overflow-y: auto;">
                    <h2 class="text-white text-[22px] font-bold leading-tight tracking-[-0.015em] mb-2">Songs</h2>
                    <input
                        id="filter-songs"
                        class="form-input w-full rounded-xl text-white border border-[#314f68] bg-[#182834] h-12 placeholder:text-[#90b0cb] px-4 text-sm mb-4"
                        value=""
                        placeholder="Type to filter songs..."
                    />
                    <div id="song-list-container" class="flex-1 flex flex-col gap-2 overflow-y-auto" style="max-height: calc(100vh - 200px);">
                        {% for id, song_name in songs %}
                        <div class="flex items-center gap-4">
                            <input
                                type="radio"
                                name="song-selection"
                                id="radio-all"
                                class="h-5 w-5 border-2 border-[#314f68] bg-transparent text-transparent checked:border-[#2094f3]"
                                data-id="{{ id }}"
                                data-name="{{ song_name }}"
                                {% if loop.index == 1 %} checked {% endif %}
                                onchange="loadSongContent('{{ song_name }}')"
                            />
                            <span class="text-white text-sm font-medium">{{ song_name }}</span>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            
                <!-- רשימת המילים -->
                <div class="flex-[1] overflow-hidden rounded-xl p-4 flex flex-col" style="max-height: 100%; overflow-y: auto;">
                    <h2 class="text-white text-[22px] font-bold leading-tight tracking-[-0.015em] mb-2">Words</h2>
                    <div class="flex items-center gap-2 mb-4">
                        <input
                            id="filter-words"
                            class="form-input w-full rounded-xl text-white border border-[#314f68] bg-[#182834] h-12 placeholder:text-[#90b0cb] px-4 text-sm"
                            value=""
                            placeholder="Type to filter words..."
                        />
                        <button
                            id="check-button"
                            class="bg-[#2094f3] text-white rounded-xl px-4 py-2 text-sm font-bold leading-normal hover:bg-[#1a7ec8] transition-colors duration-200"
                        >
                            Check
                        </button>
                    </div>
                    <div id="word-list-container" class="flex-1 flex flex-col gap-2 overflow-y-auto" style="max-height: calc(100vh - 200px);">
                        {% for id, word_str in words %}
                        <div class="flex items-center gap-4">
                            <input
                                type="radio"
                                name="song-selection"
                                id="radio-all"
                                class="h-5 w-5 border-2 border-[#314f68] bg-transparent text-transparent checked:border-[#2094f3]"
                                data-id="{{ id }}"
                                data-name="{{ word_str }}"
                                {% if loop.index == 1 %} checked {% endif %}
                            />
                            <span class="text-white text-sm font-medium">{{ word_str }}</span>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </aside>
                
                <!-- תיבת טקסט להצגת תוכן הקובץ -->
                <textarea
                    id="song-content"
                    class="w-full bg-[#182834] text-white rounded-lg p-4 text-sm border border-[#314f68]"
                    style="height: calc(100vh - 50px); overflow-y: auto; background: #182834; border: 1px solid #314f68; border-radius: 0.5rem; padding: 1rem;"
                    readonly
                    ></textarea>
        </div>
    </div>
</div>
<script>
    async function loadSongContent(songName) {
  const contentElement = document.getElementById("song-content");

  try {
    const response = await fetch(`/static/songs/${songName}.txt`);

    if (response.ok) {
      const content = await response.text();
      contentElement.innerHTML = `${content}`;
    } else if (response.status === 404) {
      contentElement.textContent = "Song file not found.";
    } else {
      contentElement.textContent = "Error loading song content.";
    }
  } catch (error) {
    console.error("Error fetching song content:", error);
    contentElement.textContent = "An error occurred while fetching the song content.";
  }
}

</script>
{% endblock %}
